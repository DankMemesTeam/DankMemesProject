extends ../shared/_master

block append page-content
    div.row
    each tag in article.tags
        div.chip
            | ##{tag}
    h1
        | #{article.title}
    p
        | Published by: 
        a(href="/users/" + article.author.username)
            | #{article.author.username}  -> #{article.author.firstName} #{article.author.lastName}
    hr
    p
        | Summary: #{article.description}
    hr
    .row
        .col.s12.m12
            p(style="white-space: pre-wrap;")
                | Content: #{article.content}
    if currentUser
        div.row
            .col.s3.s2
                if article.likes.includes(currentUser)                  
                    button.btn.waves-effect.waves-light#rate-btn(type="submit")
                        | Unlike
                        i.material-icons.right
                            | thumb_down
                else 
                    button.btn.waves-effect.waves-light#rate-btn(type="submit")
                        | Like
                        i.material-icons.right
                            | thumb_up
            .col.s3.m2
                p#likes-count.bold
                    | #{article.likes.length} likes.
        div.row
            div.row
                div.input-field.col.s6
                    input#comment-content(type="text" name="text")
                    label(for="comment-content")
                        | Add comment
                .col.s4.m2
                    button#send-comment-btn.btn.waves-effect.waves-light(type="submit")
                        | Send
                        i.material-icons.right
                            | send
    p
        | Comment section: 
    ul#comments-list.collection
        each comment in article.comments
            li.collection-item.avatar
                img.circle(src=comment.author.profilePic)
                a.title(href="/users/" + comment.author.username)
                    | #{comment.author.username}
                p
                    | #{comment.text}

        else
            h5
                | There are currently no comments on this article

block append footer
    script(src='/js/article-details.js')
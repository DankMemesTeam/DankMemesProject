extends ../shared/_master
include ../mixins/pagination.pug

block append styles
    link(rel='stylesheet', href='/css/event/style.css')
block append page-content
    .row
        .col.s12.m3
            a.create-event-btn.waves-effect.waves-light.btn(href='/events/create')
                | Create event
                i.material-icons.right
                    | add
    if events.length > 0
        nav
            div.nav-wrapper
                form
                    div.input-field
                        input#search-article.white(type='search' name='query', placeholder='Type to search for events...')
                        label.label-icon(for='search-article')
                            i.material-icons
                                | search
                        i.material-icons
                            | close

        each event in events
            ul.collection
                li.collection-item.avatar
                    a.title(href='/events/' + event._id)
                        | #{event.title}
                    p 
                        | Published by: #{event.creator}
                    p 
                        | #{event.description}
                    if locals.user && event.creator == locals.user.username
                            a.secondary-content(href="/events/" + event._id + "/edit")
                                i.material-icons
                                    | edit 
        else
            h4.center
                | No events found.
        .row
            //- Add search query as 1st parameter if one exists
            +pagination(query, pageNumber, pagesCount, "events")
    else
        h4.center
            | No events avaliable 
        h5.center.blue-grey-text.lighten-5
            | Click the 'Create event' button to create one!
